{"version":3,"file":"src_visGeometry_workers_visDataWorker_ts.index.js","mappings":"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;AACf,MAAM,wEAAwB;AAC9B;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,iBAAiB,8DAAc;AAC/B;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChB+C;AAC/C;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA,kCAAkC,6DAAa;AAC/C;AACA;AACe;AACf;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;;;;ACjB+C;AAChC;AACf,QAAQ,6DAAa;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;;;;;;;;;;;;;;ACde;AACf;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACLiD;AAClC;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH,kBAAkB,8DAAc;AAChC;;;;;;;;;;;;;;AChBe;AACf;AACA;;;;;;;;;;;;;;ACFe;AACf;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;;;;;ACVkC;AAC6B;AAChD;AACf,eAAe,sDAAO;AACtB;AACA,IAAI;AACJ;AACA;AACA,SAAS,qEAAqB;AAC9B;;;;;;;;;;;;;;ACTe;AACf;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACNkC;AACnB;AACf,MAAM,sDAAO;AACb;AACA;AACA;AACA,QAAQ,sDAAO;AACf;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACVkC;AACS;AAC5B;AACf,YAAY,2DAAW;AACvB,SAAS,sDAAO;AAChB;;;;;;;;;;;;;;ACLe;AACf;;AAEA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;;;;;;;;;;;;;;;;;;ACRiD;AACA;AACI;AACd;AACxB;AACf;AACA;AACA,2BAA2B,gEAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yDAAS,mBAAmB,8DAAc;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,WAAW,8DAAc;AACzB;AACA;AACA;;;;;;UC7BA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACNoE;AAEpEsC,IAAI,CAACC,gBAAgB,CACjB,SAAS,EACT,UAACC,CAAe,EAAK;EACjB,IAAMtC,UAAU,GAAGsC,CAAC,CAAC/B,IAAI;EACzB,IAAAgC,oBAAA,GACIxC,6EAAmB,CAACC,UAAU,CAAC;IAD3BE,cAAc,GAAAqC,oBAAA,CAAdrC,cAAc;IAAED,oBAAoB,GAAAsC,oBAAA,CAApBtC,oBAAoB;EAG5CuC,WAAW,CAAC;IACRtC,cAAc,EAAdA,cAAc;IACdD,oBAAoB,EAApBA;EACJ,CAAC,CAAC;AACN,CAAC,EACD,KACJ,CAAC,C","sources":["webpack://@aics/simularium-viewer/./src/simularium/FrontEndError.ts","webpack://@aics/simularium-viewer/./src/simularium/VisDataParse.ts","webpack://@aics/simularium-viewer/./src/simularium/types.ts","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@aics/simularium-viewer/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@aics/simularium-viewer/webpack/bootstrap","webpack://@aics/simularium-viewer/webpack/runtime/define property getters","webpack://@aics/simularium-viewer/webpack/runtime/hasOwnProperty shorthand","webpack://@aics/simularium-viewer/webpack/runtime/make namespace object","webpack://@aics/simularium-viewer/./src/visGeometry/workers/visDataWorker.ts"],"sourcesContent":["export enum ErrorLevel {\n    ERROR = \"error\",\n    INFO = \"info\",\n    WARNING = \"warning\",\n}\n\nexport class FrontEndError extends Error {\n    public htmlData: string;\n    public level: ErrorLevel;\n    constructor(\n        message: string,\n        level = ErrorLevel.ERROR,\n        htmlData = \"\",\n        ...params: string[]\n    ) {\n        // Pass remaining arguments (including vendor specific ones) to parent constructor\n        super(...params);\n        this.name = \"FrontEndError\";\n        this.message = message;\n        this.htmlData = htmlData;\n        this.level = level;\n    }\n}\n","import {\n    FrameData,\n    VisDataMessage,\n    AgentData,\n    AGENT_OBJECT_KEYS,\n} from \"./types\";\nimport { FrontEndError, ErrorLevel } from \"./FrontEndError\";\n\ninterface ParsedBundle {\n    frameDataArray: FrameData[];\n    parsedAgentDataArray: AgentData[][];\n}\n\n/**\n *   Parses a stream of data sent from the backend\n *\n *   To minimize bandwidth, traits/objects are not packed\n *   1-1; what arrives is an array of float values\n *\n *   For instance for:\n *   entity = (\n *        trait1 : 4,\n *        trait2 : 5,\n *        trait3 : 6,\n *    ) ...\n *\n *   what arrives will be:\n *       [...,4,5,6,...]\n *\n *   The traits are assumed to be variable in length,\n *   and the alorithm to decode them needs to the reverse\n *   of the algorithm that packed them on the backend\n *\n *   This is more convuluted than sending the JSON objects themselves,\n *   however these frames arrive multiple times per second. Even a naive\n *   packing reduces the packet size by ~50%, reducing how much needs to\n *   paid for network bandwith (and improving the quality & responsiveness\n *   of the application, since network latency is a major bottle-neck)\n * */\n\nfunction parseVisDataMessage(visDataMsg: VisDataMessage): ParsedBundle {\n    const parsedAgentDataArray: AgentData[][] = [];\n    const frameDataArray: FrameData[] = [];\n    visDataMsg.bundleData.forEach((frame) => {\n        const visData = frame.data;\n        const parsedAgentData: AgentData[] = [];\n        const nSubPointsIndex = AGENT_OBJECT_KEYS.findIndex(\n            (ele) => ele === \"nSubPoints\"\n        );\n\n        const parseOneAgent = (agentArray): AgentData => {\n            return agentArray.reduce(\n                (agentData, cur, i) => {\n                    let key;\n                    if (AGENT_OBJECT_KEYS[i]) {\n                        key = AGENT_OBJECT_KEYS[i];\n                        agentData[key] = cur;\n                    } else if (i < agentArray.length + agentData.nSubPoints) {\n                        agentData.subpoints.push(cur);\n                    }\n                    return agentData;\n                },\n                { subpoints: [] }\n            );\n        };\n\n        while (visData.length) {\n            const nSubPoints = visData[nSubPointsIndex];\n            const chunkLength = AGENT_OBJECT_KEYS.length + nSubPoints; // each array length is variable based on how many subpoints the agent has\n            if (visData.length < chunkLength) {\n                const attemptedMapping = AGENT_OBJECT_KEYS.map(\n                    (name, index) => `${name}: ${visData[index]}<br />`\n                );\n                // will be caught by controller.changeFile(...).catch()\n                throw new FrontEndError(\n                    \"Your data is malformed, there are too few entries.\",\n                    ErrorLevel.ERROR,\n                    `Example attempt to parse your data: <pre>${attemptedMapping.join(\n                        \"\"\n                    )}</pre>`\n                );\n            }\n\n            const agentSubSetArray = visData.splice(0, chunkLength); // cut off the array of 1 agent data from front of the array;\n            if (agentSubSetArray.length < AGENT_OBJECT_KEYS.length) {\n                const attemptedMapping = AGENT_OBJECT_KEYS.map(\n                    (name, index) => `${name}: ${agentSubSetArray[index]}<br />`\n                );\n                // will be caught by controller.changeFile(...).catch()\n                throw new FrontEndError(\n                    \"Your data is malformed, there are less entries than expected for this agent. \",\n                    ErrorLevel.ERROR,\n                    `Example attempt to parse your data: <pre>${attemptedMapping.join(\n                        \"\"\n                    )}</pre>`\n                );\n            }\n\n            const agent = parseOneAgent(agentSubSetArray);\n            parsedAgentData.push(agent);\n        }\n\n        const frameData: FrameData = {\n            time: frame.time,\n            frameNumber: frame.frameNumber,\n        };\n\n        parsedAgentDataArray.push(parsedAgentData);\n        frameDataArray.push(frameData);\n    });\n\n    return {\n        parsedAgentDataArray,\n        frameDataArray,\n    };\n}\n\nexport { parseVisDataMessage };\nexport type { ParsedBundle };\n","import { GeometryDisplayType } from \"../visGeometry/types\";\n\nexport interface VisDataFrame {\n    data: number[];\n    frameNumber: number;\n    time: number;\n}\n\n// TODO: see proposed new NetMessage data type\n//       Remove msgType and fileName from this data structure\n//       Then this data structure appears as a payload of the NetMessage\nexport interface VisDataMessage {\n    msgType: number;\n    bundleStart: number;\n    bundleSize: number;\n    bundleData: VisDataFrame[];\n    fileName: string;\n}\n\nexport interface Coordinates3d {\n    x: number;\n    y: number;\n    z: number;\n}\n\nexport interface PerspectiveCameraSpec {\n    position: Coordinates3d;\n    lookAtPosition: Coordinates3d;\n    upVector: Coordinates3d;\n    fovDegrees: number;\n}\n\nexport type CameraSpec = PerspectiveCameraSpec &\n    ({ orthographic: false } | { orthographic: true; zoom: number });\n\ninterface ScatterTrace {\n    x: number[];\n    y: number[];\n    mode: \"markers\" | \"lines\" | \"lines+markers\";\n    type: \"scatter\";\n    name?: string;\n}\ninterface HistogramTrace {\n    x: number[];\n    y: number[];\n    type: \"histogram\";\n    name?: string;\n}\n\ninterface Layout {\n    title: string;\n    xaxis: { title: string };\n    yaxis: { title: string };\n}\n\nexport interface Plot {\n    data: ScatterTrace[] | HistogramTrace[];\n    layout?: Layout;\n}\n\ntype CachedObservables = Plot[];\n\nexport interface AgentTypeVisData {\n    displayType: GeometryDisplayType;\n    url: string;\n    color: string;\n}\n\nexport interface AgentDisplayDataWithGeometry {\n    name: string;\n    geometry: AgentTypeVisData;\n}\n\nexport interface AgentDisplayData {\n    name: string;\n    geometry?: AgentTypeVisData;\n}\n\nexport interface EncodedTypeMapping {\n    [key: number]: AgentDisplayData;\n}\n\n// TODO: see proposed new NetMessage data type\n//       Remove msgType and connId from this data structure.\n//       Then this data structure appears as a payload of the NetMessage\ninterface TrajectoryFileInfoBase {\n    connId: string;\n    msgType: number;\n    readonly version: number;\n    timeStepSize: number;\n    totalSteps: number;\n    size: Coordinates3d;\n    typeMapping: EncodedTypeMapping;\n}\n\nexport interface TrajectoryFileInfoV1 extends TrajectoryFileInfoBase {\n    spatialUnitFactorMeters: number;\n}\n\nexport interface TrajectoryFileInfoV2 extends TrajectoryFileInfoBase {\n    spatialUnits: {\n        magnitude: number;\n        name: string;\n    };\n    timeUnits: {\n        magnitude: number;\n        name: string;\n    };\n    cameraDefault: PerspectiveCameraSpec;\n}\n\nexport interface ModelInfo {\n    authors?: string;\n    description?: string;\n    doi?: string;\n    inputDataUrl?: string;\n    rawOutputDataUrl?: string;\n    sourceCodeLicenseUrl?: string;\n    sourceCodeUrl?: string;\n    title?: string;\n    version?: string;\n}\nexport interface TrajectoryFileInfoV3 extends TrajectoryFileInfoV2 {\n    modelInfo?: ModelInfo;\n    trajectoryTitle?: string;\n}\n\nexport type TrajectoryFileInfoAny = TrajectoryFileInfoV1 | TrajectoryFileInfoV2;\n\n// This should always point to the latest version\nexport type TrajectoryFileInfo = TrajectoryFileInfoV3;\n\nexport interface SimulariumFileFormat {\n    trajectoryInfo: TrajectoryFileInfo;\n    spatialData: VisDataMessage;\n    plotData: CachedObservables;\n}\n\nexport const FILE_STATUS_SUCCESS = \"success\";\nexport const FILE_STATUS_FAIL = \"fail\";\n\ntype FileStatusSuccess = typeof FILE_STATUS_SUCCESS;\ntype FileStatusFail = typeof FILE_STATUS_FAIL;\n\nexport type FileStatus = FileStatusSuccess | FileStatusFail;\n\nexport interface FileReturn {\n    status: FileStatus;\n    message?: string;\n}\n\n// IMPORTANT: Order of this array needs to perfectly match the incoming data.\nexport const AGENT_OBJECT_KEYS = [\n    // TODO: convert \"vis-type\" to visType at parse time\n    \"vis-type\",\n    \"instanceId\",\n    \"type\",\n    \"x\",\n    \"y\",\n    \"z\",\n    \"xrot\",\n    \"yrot\",\n    \"zrot\",\n    \"cr\",\n    \"nSubPoints\",\n];\n\n/**\n * Parse Agents from Net Data\n * */\nexport interface AgentData {\n    x: number;\n    y: number;\n    z: number;\n    xrot: number;\n    yrot: number;\n    zrot: number;\n    instanceId: number;\n    [\"vis-type\"]: number;\n    type: number;\n    cr: number;\n    subpoints: number[];\n}\n\nexport interface FrameData {\n    frameNumber: number;\n    time: number;\n}\n\nexport interface PlotConfig {\n    plotType: string;\n    metricsIdx: number;\n    metricsIdy?: number;\n    scatterPlotMode?: string;\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { parseVisDataMessage } from \"../../simularium/VisDataParse\";\n\nself.addEventListener(\n    \"message\",\n    (e: MessageEvent) => {\n        const visDataMsg = e.data;\n        const { frameDataArray, parsedAgentDataArray } =\n            parseVisDataMessage(visDataMsg);\n\n        postMessage({\n            frameDataArray,\n            parsedAgentDataArray,\n        });\n    },\n    false\n);\n"],"names":["ErrorLevel","FrontEndError","_Error","_inherits","_super","_createSuper","message","_this","level","arguments","length","undefined","ERROR","htmlData","_classCallCheck","_len","params","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","name","_createClass","_wrapNativeSuper","Error","AGENT_OBJECT_KEYS","parseVisDataMessage","visDataMsg","parsedAgentDataArray","frameDataArray","bundleData","forEach","frame","visData","data","parsedAgentData","nSubPointsIndex","findIndex","ele","parseOneAgent","agentArray","reduce","agentData","cur","i","key","nSubPoints","subpoints","push","_loop","chunkLength","attemptedMapping","map","index","join","agentSubSetArray","splice","agent","frameData","time","frameNumber","FILE_STATUS_SUCCESS","FILE_STATUS_FAIL","self","addEventListener","e","_parseVisDataMessage","postMessage"],"sourceRoot":""}