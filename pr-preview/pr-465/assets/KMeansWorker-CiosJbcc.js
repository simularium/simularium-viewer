(function(){"use strict";function rt(t,r,e,a,c,i,u){try{var f=t[i](u),p=f.value}catch(m){return void e(m)}f.done?r(p):Promise.resolve(p).then(a,c)}function Et(t){return function(){var r=this,e=arguments;return new Promise(function(a,c){var i=t.apply(r,e);function u(p){rt(i,a,c,u,f,"next",p)}function f(p){rt(i,a,c,u,f,"throw",p)}u(void 0)})}}function nt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function R(t){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R(t)}function _t(t,r){if(R(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var a=e.call(t,r);if(R(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function at(t){var r=_t(t,"string");return R(r)=="symbol"?r:r+""}function ot(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,at(a.key),a)}}function it(t,r,e){return r&&ot(t.prototype,r),e&&ot(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q={exports:{}},V={exports:{}},st;function kt(){return st||(st=1,function(t){function r(e){"@babel/helpers - typeof";return t.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(V)),V.exports}var ut;function St(){return ut||(ut=1,function(t){var r=kt().default;function e(){t.exports=e=function(){return c},t.exports.__esModule=!0,t.exports.default=t.exports;var a,c={},i=Object.prototype,u=i.hasOwnProperty,f=Object.defineProperty||function(s,n,o){s[n]=o.value},p=typeof Symbol=="function"?Symbol:{},m=p.iterator||"@@iterator",g=p.asyncIterator||"@@asyncIterator",d=p.toStringTag||"@@toStringTag";function v(s,n,o){return Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}),s[n]}try{v({},"")}catch{v=function(o,l,y){return o[l]=y}}function M(s,n,o,l){var y=n&&n.prototype instanceof B?n:B,h=Object.create(y.prototype),b=new tt(l||[]);return f(h,"_invoke",{value:Qt(s,o,b)}),h}function X(s,n,o){try{return{type:"normal",arg:s.call(n,o)}}catch(l){return{type:"throw",arg:l}}}c.wrap=M;var gt="suspendedStart",Jt="suspendedYield",bt="executing",F="completed",_={};function B(){}function G(){}function P(){}var J={};v(J,m,function(){return this});var Q=Object.getPrototypeOf,W=Q&&Q(Q(et([])));W&&W!==i&&u.call(W,m)&&(J=W);var O=P.prototype=B.prototype=Object.create(J);function wt(s){["next","throw","return"].forEach(function(n){v(s,n,function(o){return this._invoke(n,o)})})}function H(s,n){function o(y,h,b,w){var x=X(s[y],s,h);if(x.type!=="throw"){var A=x.arg,k=A.value;return k&&r(k)=="object"&&u.call(k,"__await")?n.resolve(k.__await).then(function(L){o("next",L,b,w)},function(L){o("throw",L,b,w)}):n.resolve(k).then(function(L){A.value=L,b(A)},function(L){return o("throw",L,b,w)})}w(x.arg)}var l;f(this,"_invoke",{value:function(h,b){function w(){return new n(function(x,A){o(h,b,x,A)})}return l=l?l.then(w,w):w()}})}function Qt(s,n,o){var l=gt;return function(y,h){if(l===bt)throw Error("Generator is already running");if(l===F){if(y==="throw")throw h;return{value:a,done:!0}}for(o.method=y,o.arg=h;;){var b=o.delegate;if(b){var w=xt(b,o);if(w){if(w===_)continue;return w}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(l===gt)throw l=F,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);l=bt;var x=X(s,n,o);if(x.type==="normal"){if(l=o.done?F:Jt,x.arg===_)continue;return{value:x.arg,done:o.done}}x.type==="throw"&&(l=F,o.method="throw",o.arg=x.arg)}}}function xt(s,n){var o=n.method,l=s.iterator[o];if(l===a)return n.delegate=null,o==="throw"&&s.iterator.return&&(n.method="return",n.arg=a,xt(s,n),n.method==="throw")||o!=="return"&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),_;var y=X(l,s.iterator,n.arg);if(y.type==="throw")return n.method="throw",n.arg=y.arg,n.delegate=null,_;var h=y.arg;return h?h.done?(n[s.resultName]=h.value,n.next=s.nextLoc,n.method!=="return"&&(n.method="next",n.arg=a),n.delegate=null,_):h:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function Zt(s){var n={tryLoc:s[0]};1 in s&&(n.catchLoc=s[1]),2 in s&&(n.finallyLoc=s[2],n.afterLoc=s[3]),this.tryEntries.push(n)}function Z(s){var n=s.completion||{};n.type="normal",delete n.arg,s.completion=n}function tt(s){this.tryEntries=[{tryLoc:"root"}],s.forEach(Zt,this),this.reset(!0)}function et(s){if(s||s===""){var n=s[m];if(n)return n.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length)){var o=-1,l=function y(){for(;++o<s.length;)if(u.call(s,o))return y.value=s[o],y.done=!1,y;return y.value=a,y.done=!0,y};return l.next=l}}throw new TypeError(r(s)+" is not iterable")}return G.prototype=P,f(O,"constructor",{value:P,configurable:!0}),f(P,"constructor",{value:G,configurable:!0}),G.displayName=v(P,d,"GeneratorFunction"),c.isGeneratorFunction=function(s){var n=typeof s=="function"&&s.constructor;return!!n&&(n===G||(n.displayName||n.name)==="GeneratorFunction")},c.mark=function(s){return Object.setPrototypeOf?Object.setPrototypeOf(s,P):(s.__proto__=P,v(s,d,"GeneratorFunction")),s.prototype=Object.create(O),s},c.awrap=function(s){return{__await:s}},wt(H.prototype),v(H.prototype,g,function(){return this}),c.AsyncIterator=H,c.async=function(s,n,o,l,y){y===void 0&&(y=Promise);var h=new H(M(s,n,o,l),y);return c.isGeneratorFunction(n)?h:h.next().then(function(b){return b.done?b.value:h.next()})},wt(O),v(O,d,"Generator"),v(O,m,function(){return this}),v(O,"toString",function(){return"[object Generator]"}),c.keys=function(s){var n=Object(s),o=[];for(var l in n)o.push(l);return o.reverse(),function y(){for(;o.length;){var h=o.pop();if(h in n)return y.value=h,y.done=!1,y}return y.done=!0,y}},c.values=et,tt.prototype={constructor:tt,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(Z),!n)for(var o in this)o.charAt(0)==="t"&&u.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=a)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var o=this;function l(A,k){return b.type="throw",b.arg=n,o.next=A,k&&(o.method="next",o.arg=a),!!k}for(var y=this.tryEntries.length-1;y>=0;--y){var h=this.tryEntries[y],b=h.completion;if(h.tryLoc==="root")return l("end");if(h.tryLoc<=this.prev){var w=u.call(h,"catchLoc"),x=u.call(h,"finallyLoc");if(w&&x){if(this.prev<h.catchLoc)return l(h.catchLoc,!0);if(this.prev<h.finallyLoc)return l(h.finallyLoc)}else if(w){if(this.prev<h.catchLoc)return l(h.catchLoc,!0)}else{if(!x)throw Error("try statement without catch or finally");if(this.prev<h.finallyLoc)return l(h.finallyLoc)}}}},abrupt:function(n,o){for(var l=this.tryEntries.length-1;l>=0;--l){var y=this.tryEntries[l];if(y.tryLoc<=this.prev&&u.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var h=y;break}}h&&(n==="break"||n==="continue")&&h.tryLoc<=o&&o<=h.finallyLoc&&(h=null);var b=h?h.completion:{};return b.type=n,b.arg=o,h?(this.method="next",this.next=h.finallyLoc,_):this.complete(b)},complete:function(n,o){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&o&&(this.next=o),_},finish:function(n){for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o];if(l.finallyLoc===n)return this.complete(l.completion,l.afterLoc),Z(l),_}},catch:function(n){for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o];if(l.tryLoc===n){var y=l.completion;if(y.type==="throw"){var h=y.arg;Z(l)}return h}}throw Error("illegal catch attempt")},delegateYield:function(n,o,l){return this.delegate={iterator:et(n),resultName:o,nextLoc:l},this.method==="next"&&(this.arg=a),_}},c}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(q)),q.exports}var U,ct;function Pt(){if(ct)return U;ct=1;var t=St()();U=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}return U}var At=Pt(),lt=Mt(At);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ft=Symbol("Comlink.proxy"),Lt=Symbol("Comlink.endpoint"),Tt=Symbol("Comlink.releaseProxy"),z=Symbol("Comlink.finalizer"),C=Symbol("Comlink.thrown"),ht=t=>typeof t=="object"&&t!==null||typeof t=="function",Ot={canHandle:t=>ht(t)&&t[ft],serialize(t){const{port1:r,port2:e}=new MessageChannel;return K(t,r),[e,[e]]},deserialize(t){return t.start(),Dt(t)}},Rt={canHandle:t=>ht(t)&&C in t,serialize({value:t}){let r;return t instanceof Error?r={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:r={isError:!1,value:t},[r,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},yt=new Map([["proxy",Ot],["throw",Rt]]);function Ct(t,r){for(const e of t)if(r===e||e==="*"||e instanceof RegExp&&e.test(r))return!0;return!1}function K(t,r=globalThis,e=["*"]){r.addEventListener("message",function a(c){if(!c||!c.data)return;if(!Ct(e,c.origin)){console.warn(`Invalid origin '${c.origin}' for comlink proxy`);return}const{id:i,type:u,path:f}=Object.assign({path:[]},c.data),p=(c.data.argumentList||[]).map(S);let m;try{const g=f.slice(0,-1).reduce((v,M)=>v[M],t),d=f.reduce((v,M)=>v[M],t);switch(u){case"GET":m=d;break;case"SET":g[f.slice(-1)[0]]=S(c.data.value),m=!0;break;case"APPLY":m=d.apply(g,p);break;case"CONSTRUCT":{const v=new d(...p);m=Wt(v)}break;case"ENDPOINT":{const{port1:v,port2:M}=new MessageChannel;K(t,M),m=Gt(v,[v])}break;case"RELEASE":m=void 0;break;default:return}}catch(g){m={value:g,[C]:0}}Promise.resolve(m).catch(g=>({value:g,[C]:0})).then(g=>{const[d,v]=N(g);r.postMessage(Object.assign(Object.assign({},d),{id:i}),v),u==="RELEASE"&&(r.removeEventListener("message",a),pt(r),z in t&&typeof t[z]=="function"&&t[z]())}).catch(g=>{const[d,v]=N({value:new TypeError("Unserializable return value"),[C]:0});r.postMessage(Object.assign(Object.assign({},d),{id:i}),v)})}),r.start&&r.start()}function jt(t){return t.constructor.name==="MessagePort"}function pt(t){jt(t)&&t.close()}function Dt(t,r){const e=new Map;return t.addEventListener("message",function(c){const{data:i}=c;if(!i||!i.id)return;const u=e.get(i.id);if(u)try{u(i)}finally{e.delete(i.id)}}),Y(t,e,[],r)}function j(t){if(t)throw new Error("Proxy has been released and is not useable")}function mt(t){return T(t,new Map,{type:"RELEASE"}).then(()=>{pt(t)})}const D=new WeakMap,I="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const r=(D.get(t)||0)-1;D.set(t,r),r===0&&mt(t)});function It(t,r){const e=(D.get(r)||0)+1;D.set(r,e),I&&I.register(t,r,t)}function Nt(t){I&&I.unregister(t)}function Y(t,r,e=[],a=function(){}){let c=!1;const i=new Proxy(a,{get(u,f){if(j(c),f===Tt)return()=>{Nt(i),mt(t),r.clear(),c=!0};if(f==="then"){if(e.length===0)return{then:()=>i};const p=T(t,r,{type:"GET",path:e.map(m=>m.toString())}).then(S);return p.then.bind(p)}return Y(t,r,[...e,f])},set(u,f,p){j(c);const[m,g]=N(p);return T(t,r,{type:"SET",path:[...e,f].map(d=>d.toString()),value:m},g).then(S)},apply(u,f,p){j(c);const m=e[e.length-1];if(m===Lt)return T(t,r,{type:"ENDPOINT"}).then(S);if(m==="bind")return Y(t,r,e.slice(0,-1));const[g,d]=vt(p);return T(t,r,{type:"APPLY",path:e.map(v=>v.toString()),argumentList:g},d).then(S)},construct(u,f){j(c);const[p,m]=vt(f);return T(t,r,{type:"CONSTRUCT",path:e.map(g=>g.toString()),argumentList:p},m).then(S)}});return It(i,t),i}function Ft(t){return Array.prototype.concat.apply([],t)}function vt(t){const r=t.map(N);return[r.map(e=>e[0]),Ft(r.map(e=>e[1]))]}const dt=new WeakMap;function Gt(t,r){return dt.set(t,r),t}function Wt(t){return Object.assign(t,{[ft]:!0})}function N(t){for(const[r,e]of yt)if(e.canHandle(t)){const[a,c]=e.serialize(t);return[{type:"HANDLER",name:r,value:a},c]}return[{type:"RAW",value:t},dt.get(t)||[]]}function S(t){switch(t.type){case"HANDLER":return yt.get(t.name).deserialize(t.value);case"RAW":return t.value}}function T(t,r,e,a){return new Promise(c=>{const i=Ht();r.set(i,c),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),a)})}function Ht(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function $(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,a=Array(r);e<r;e++)a[e]=t[e];return a}function qt(t){if(Array.isArray(t))return $(t)}function Vt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ut(t,r){if(t){if(typeof t=="string")return $(t,r);var e={}.toString.call(t).slice(8,-1);return e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set"?Array.from(t):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?$(t,r):void 0}}function zt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kt(t){return qt(t)||Vt(t)||Ut(t)||zt()}function E(t,r,e){return(r=at(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Yt(t,r,e){for(var a=0;a<t.length;++a)if(Math.abs(t[a]-r[a])>e)return!1;return!0}function $t(t){for(var r=Number.MAX_VALUE,e=0;e<t.length;++e)t[e]<r&&(r=t[e]);return r}var Xt=function(){function t(r){nt(this,t),E(this,"k",void 0),E(this,"data",void 0),E(this,"assignments",void 0),E(this,"extents",void 0),E(this,"ranges",void 0),E(this,"means",void 0),E(this,"iterations",void 0),E(this,"drawDelay",void 0),E(this,"timer",void 0),E(this,"tmpDistances",void 0),this.k=r.k,this.tmpDistances=new Float32Array(this.k),this.data=r.data,this.assignments=new Int32Array(this.data.length/3),this.extents=this.dataDimensionExtents(this.data),this.ranges=this.dataExtentRanges(),this.means=t.randomSeeds(this.k,this.data),this.iterations=0,this.drawDelay=1,this.timer=-1,this.run()}return it(t,[{key:"dataDimensionExtents",value:function(e){for(var a=[1e6,1e6,1e6,-1e6,-1e6,-1e6],c=0;c<e.length/3;c++){var i=e[c*3],u=e[c*3+1],f=e[c*3+2];i<a[0]&&(a[0]=i),i>a[3]&&(a[3]=i),u<a[1]&&(a[1]=u),u>a[4]&&(a[4]=u),f<a[2]&&(a[2]=f),f>a[5]&&(a[5]=f)}return a}},{key:"dataExtentRanges",value:function(){return[this.extents[3]-this.extents[0],this.extents[4]-this.extents[1],this.extents[5]-this.extents[2]]}},{key:"seeds",value:function(){for(var e=new Float32Array(this.k*3),a=0;a<this.k;++a)e[a*3]=this.extents[0]+Math.random()*this.ranges[0],e[a*3+1]=this.extents[1]+Math.random()*this.ranges[1],e[a*3+2]=this.extents[2]+Math.random()*this.ranges[2];return e}},{key:"assignClusterToDataPoints",value:function(){for(var e=0;e<this.data.length/3;e++){for(var a=this.data[e*3],c=this.data[e*3+1],i=this.data[e*3+2],u=0;u<this.means.length/3;u++){var f=this.means[u*3],p=this.means[u*3+1],m=this.means[u*3+2],g=(a-f)*(a-f)+(c-p)*(c-p)+(i-m)*(i-m);this.tmpDistances[u]=Math.sqrt(g)}var d=$t(this.tmpDistances);this.assignments[e]=this.tmpDistances.indexOf(d)}}},{key:"moveMeans",value:function(){for(var e=new Float32Array(this.means.length).fill(0),a=new Int32Array(this.means.length/3).fill(0),c=!1,i,u,f=0;f<this.assignments.length;f++){i=this.assignments[f];var p=this.data[f*3],m=this.data[f*3+1],g=this.data[f*3+2];a[i]++,e[i*3]+=p,e[i*3+1]+=m,e[i*3+2]+=g}for(i=0;i<e.length/3;i++){if(a[i]===0){e[i*3]=this.extents[0]+Math.random()*this.ranges[0],e[i*3+1]=this.extents[1]+Math.random()*this.ranges[1],e[i*3+2]=this.extents[2]+Math.random()*this.ranges[2];continue}e[i*3]/=a[i],e[i*3]=Math.round(100*e[i*3])/100,e[i*3+1]/=a[i],e[i*3+1]=Math.round(100*e[i*3+1])/100,e[i*3+2]/=a[i],e[i*3+2]=Math.round(100*e[i*3+2])/100}if(!Yt(this.means,e,.01)){var d;for(c=!0,i=0;i<e.length/3;i++)for(u=0;u<3;u++)if(d=e[i*3+u]-this.means[i*3+u],Math.abs(d)>.1){var v=10;this.means[i*3+u]+=d/v,this.means[i*3+u]=Math.round(100*this.means[i*3+u])/100}else this.means[i*3+u]=e[i*3+u]}return c}},{key:"run",value:function(){var e=!0,a=150,c=5e3,i=Date.now(),u=0;do++this.iterations,this.assignClusterToDataPoints(),e=this.moveMeans(),u=Date.now()-i;while(e&&this.iterations<a&&!(u>c))}}],[{key:"randomSeeds",value:function(e,a){for(var c=a.length/3,i=new Set;i.add(Math.floor(Math.random()*c)|0).size<e;);for(var u=Kt(i),f=new Float32Array(e*3),p=0;p<e;++p)f[p*3]=a[u[p]*3],f[p*3+1]=a[u[p]*3+1],f[p*3+2]=a[u[p]*3+2];return f}}])}(),Bt=function(){function t(){nt(this,t)}return it(t,[{key:"run",value:function(){var r=Et(lt.mark(function a(c,i,u){var f,p,m;return lt.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:for(f=[],p=0;p<i.length;++p)m=new Xt({k:i[p],data:u}),f.push(m.means);return d.abrupt("return",f);case 3:case"end":return d.stop()}},a)}));function e(a,c,i){return r.apply(this,arguments)}return e}()}])}();K(Bt)})();
